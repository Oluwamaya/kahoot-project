<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9"
    crossorigin="anonymous"
  />
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
  />
  <script src="https://www.gstatic.com/firebasejs/10.3.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.3.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.3.1/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.3.1/firebase-storage-compat.js"></script>
</head>
<style>
.kot{
    height: 70px;
    /* background-color: whitesmoke; */
}
.hk{
    margin-top: -10px;

}
.mutu{
    font-size: 13px;
}

.king{
display: flex;
align-items: center;
justify-content: center;
}
body{
        background-image: url(next.jpg);
        background-position: center;
        background-repeat: no-repeat;
        background-size: cover;
        height: 100vh;
       
    }
    .mok{
        text-align: center;
        width: 30%;
        padding: 2%;
        border-radius: 15px;
    }
    .bol{
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    .bamm{
        width: 32%;
        background-color: rgba(0, 0, 0, 0.799);
        margin-top: 1%;
        padding: 2%;
        border-radius: 15px;
    }
    
</style>
<body  >
<header class="container ">

    <div class="col-8 col-md-4 kot d-flex border bg-white m-auto  rounded">
  <div class="w-75 px-2">
      <p class="fw-bold  mutu">
          join at <a class="text-decoration-none  text-dark " href="home.html">www.kahoot.it</a>  or with the kahoot! app</p>
  </div>
    <div class="mx-2 w-50 bg-black text-white text-center">
        <p class="fw-bold">Game Pin:</p>
        <p class="hk h3"> 202030</p>
    </div>
</div>

</div>
 
</header>
<button onclick="let()" class="end-0 top-25 position-absolute  btn btn-light">START</button>
    
        <div class="d-flex   justify-content-center mt-5 ">
          
      <main class="m-auto mt-5">    
  <div class="text-center text-light mt-1 d-flex flex-wrap justify-content-evenly align-self-center text-center   " id="bad">

  </div>

    </main>
    
</body>
<script>
    const firebaseConfig = {
    apiKey: "AIzaSyDtpT23EPLkTS9kfEf6Aa02Wli2Ehgfpqw",
    authDomain: "isammy-k.firebaseapp.com",
    projectId: "isammy-k",
    storageBucket: "isammy-k.appspot.com",
    messagingSenderId: "243915862365",
    appId: "1:243915862365:web:e0c543ab2caf0ed241b8b4",
   };
  
    // Initialize Firebase
    const app = firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
  </script>

<script>
    let disGamer = document.getElementById("bad")
    usercount = 0
    function looop() {
        // Retrieve data from Firestore after initializing Firebase
        const citiesRef = db.collection("post");

        citiesRef.get().then((querySnapshot) => {
            // Clear the old names by setting cont's innerHTML to an empty string
           disGamer.innerHTML = "";
            userCount = 0;

            querySnapshot.forEach((doc) => {
                const data = doc.data();
                const username = data.username;

                // Check if "username" exists and is not empty
                if (username) {
                    // Increment the userCount and display it with the username
                    userCount++;
                   disGamer.innerHTML += `<div class="container fs-5 bamm"> 
                    P${userCount}: ${username}
                </div>
                <br>`;
                } else {
                    // Handle the case where "username" is missing or empty
                    console.log("Username is missing or empty:", username);
                }
            });
        }).catch((error) => {
            console.log("Error getting documents: ", error);
        });
    }

    // Call the looop function every 2 seconds (2000 milliseconds)
    const intervalId = setInterval(looop, 2000);
    looop()


    function let(){

         clearInterval(intervalId , 1000)

         var washingtonRef = db.collection("just").doc("LA");

// Set the "capital" field of the city 'DC'
return washingtonRef.update({
    hasStarted: true
})
.then(() => {
    console.log("Document successfully updated!");
    db.collection("just").doc("LA")
    .onSnapshot((doc) => {
        console.log("Current data: ", doc.data());
        console.log(doc.data());
        window.location.href = "quiz.html"
    }); 
})
.catch((error) => {
    // The document probably doesn't exist.
    console.error("Error updating document: ", error);
});

    }

    // setInterval(function deal() {
    //     window.location.href = "play.html"
    // },4000)
</script>
</html>